<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>article</title>
    <link rel="stylesheet" href="/assets/css/article.css">
    <script src="../assets/js/loading.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="../assets/js/firebase-init.js"></script>
    <script src="../assets/js/articles-services.js"></script>
    <link rel="stylesheet" href="../assets/css/global.css">
    
</head>
<body>
    
    <header>
        <h1>Comunidade Sustentável Júnior</h1>
        <p>Transformando a sociedade com inovação e sustentabilidade</p>
    </header>
    <nav>
        <ul class="cabecalho">
            <li><a href="../pages/community.html">Comunidade</a></li>
            <li><a href="../pages/event.html">Evento</a></li>
            <li><a href="../pages/home.html">Meus Artigos</a></li>
            <li><a href="../pages/Contato.html">Contato</a></li>
            <button type="button" id="logout" onclick="logout()">Sair</button>
        </ul> 
        <div class="titulo"><h1>Criar artigo</h1></div>
    </nav>
    
    <main>
        <div class="estiloform">
            <form>
                
                <div class="titlel">
                    <div><label>Titulo*</label></div>
                    <input maxlength="90" id="title" type="text" oninput="onChangeTitle()" required>
                    <div class="error" id="title-required-error">
                        Titulo obrigatório
                    </div>
                </div>
                <div class="title">
                    <div><label>Data (automática)</label></div>
                    <input readonly id="date" type="date" oninput="onChangeDate()">
                </div>
                <div class="descricao">
                    <div><label>Descrição *</label></div>
                    <textarea name="description" id="description" cols="30" rows="10"></textarea>
                </div>
                <div class="areaartigo">
                    <div class="area">
                        <div><label>Área *</label></div>
                        <select onchange="onChangeType()" id="activity-area">
                            <option value="">Área de atuação</option>
                            <option>Casa</option>
                            <option>Jardim</option>
                            <option>Praça</option>
                            <option>Praia</option>
                            <option>Rua</option>
                        </select>
                        <div class="error" id="area-required-error">Área obrigatória</div>
                    </div>
                    <div class="artigo">
                        <label class="labeltipo">Tipo *</label>
                        <div>
                            <div>
                                <label>Artigo </label>
                                <input id="article" type="radio" name="type">
                            </div>
                
                            <div>
                                <label>Questão </label>
                                <input id="question" type="radio" name="type">
                            </div>
                
                            <div>
                                <label>Dica </label>
                                <input id="tip" type="radio" name="type">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="botoes">
                    <button type="button" disabled id="postButton" onclick="postArticle()">Publicar</button>
                    <button type="button" onclick="cancelArticle()">Cancelar</button>
                </div>
                
            </form>
        </div>
        
    </main>
    <footer>
        <div class="footerdiv">
            <p>&copy; 2023 Comunidade Sustentável Júnior</p>
        </div>
    </footer>
</body>
<script src="../assets/js/article.js"></script>
<script src="../assets/js/auth-guard.js"></script>
<script>
    // Adicionado código para obter o UID do artigo da URL
    const articleUID = getArticleIDFromURL();
    if (articleUID) {
        findArticlesByUid(articleUID);
    }

    function getArticleIDFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('uid');
    }
</script>
</html>